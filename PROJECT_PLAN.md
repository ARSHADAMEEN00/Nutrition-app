# AI-Enhanced Personalized Nutrition App - Project Plan

## 1. Project Overview
**Goal**: Create a smart nutrition assistant that allows users to log their lifestyle (diet, sleep) and receive personalized, actionable advice using AI.
**Core Value**: bridging the gap between raw tracking (calories) and qualitative health advice (what nutrients are missing, how to fix it).

## 2. Features & Functionality ("What we can do")

### Phase 1: MVP (Minimum Viable Product)
1.  **User Authentication**
    *   Secure Login/Signup.
    *   Profile creation (Age, Gender, Weight, Height, Dietary Prefs).

2.  **Daily Input Dashboard**
    *   **Health Logs**: Sleep duration, Water intake, Activity level.
    *   **Food Logger**: Input "Times" + "Food Items" (e.g., "Breakfast at 8 AM: 2 Eggs, Toast").
    *   **Pantry/Availability**: Input "Available Food Items" to tailor recommendations (e.g., "I have spinach, eggs, and chicken").

3.  **Nutrition Analysis Engine (The "Brain")**
    *   Calculate rough caloric and macronutrient intake.
    *   **AI Summary**: "You are low on Fiber and Vitamin C today."
    *   **Contextual Advice**: "Since you have spinach available, try making a spinach omelet for dinner to boost your Iron and Fiber."

4.  **Dashboards**
    *   Visual charts of daily nutrition.
    *   Alerts for diet issues (e.g., "High Sugar intake today").

### Phase 2: Advanced Features (Future)
1.  **AI Vision**: Upload an image of your meal -> AI interprets contents -> Auto-logs nutrition.
2.  **Weekly Pattern Recognition**: "You consistently get poor sleep on days you eat late."

---

## 3. Technical Architecture ("How we do this")

Since we have a monorepo structure with `app` and `server` workspaces:

### Mobile App (`/app`)
*   **Framework**: Flutter (Dart).
*   **Styling**: standard Flutter Widgets (Material 3) for premium, native aesthetics.
*   **State Management**: Provider, Riverpod, or Bloc.
*   **Charting**: fl_chart or a similar library for nutrition visualization.

### Backend (`/server`)
*   **Framework**: Node.js with Express (already initialized).
*   **Language**: TypeScript.
*   **AI Integration**: Integration with Gemini API or OpenAI API to process natural language food logs and generate advice.

### Database
*   **Database**: **MongoDB (NoSQL)** - Selected for its flexibility with complex nested data (User Profile, Health Habits, Generated Plans) and seamless integration with AI JSON outputs.

---

## 4. Database Structure Plan

We need a schema that focuses on a rich User Profile and Generated Diet Plans.

### Schema Design (Mongoose)

1.  **User Collection**
    *   `_id`
    *   `auth`: `email`, `password_hash`
    *   `personal_data`: `name`, `age`, `gender`, `height`, `weight`
    *   `health_data`: 
        *   `dietary_preferences` (e.g., Veg, Non-Veg, Keto)
        *   `allergies` (Array)
        *   `activity_level`
        *   `medical_conditions`
        *   `goals` (e.g., Weight Loss)
    *   `current_habits`: (Snapshots of typical behavior)
        *   `sleep_pattern` (avg hours)
        *   `water_intake`
    *   `created_at`

2.  **DietPlans Collection** (Generated by AI)
    *   `_id`
    *   `user_id` (Ref)
    *   `created_at`
    *   `duration_type` (Weekly/Monthly)
    *   `inputs_snapshot`: (Copy of the health/pantry data used to generate this plan)
    *   `plan_data`: (Complex JSON structure with days, meals, recipes)
    *   `status`: (Active, Completed, Archived)

---

## 5. Implementation Steps

### Step 1: Foundation
*   Initialize `app` directory (Flutter).
*   Set up App Theme (Vibrant, Premium look).

### Step 2: Backend Setup
*   Define API Routes in `server`.
*   Connect Database (ORM like Prisma or Sequelize recommended).

### Step 3: Core Features
*   **Auth**: Build Login/Register pages.
*   **Input**: Build the "Daily Check-in" form.

### Step 4: Intelligence
*   Integrate LLM in Backend:
    *   Prompt: "User ate [X], needs [Y]. User has ingredients [Z]. Provide recipe suggestion."

### Step 5: Dashboard Visualization
*   Render the "Nutrition Summary" and "Suggestions" cards on the frontend.
